# P2367 语文成绩

## **题目详情**

第一行有两个整数 n，p，代表学生数与增加分数的次数。

第二行有 n个数,a~1~—a~n~,代表各个学生的初始成绩。

接下来 p行，每行有三个数，x，y，z，代表给第 x 个到第 y 个学生每人增加 z 分。

输出仅一行，代表更改分数后，全班的最低分。

> 对于 40% 的数据，有 n ≤10^3^。
>
> 对于 60% 的数据，有 n ≤10^4^。
>
> 对于 80% 的数据，有 n ≤10^5^。
>
> 对于 100% 的数据，有 n ≤5×10^6^，p≤*n*，学生初始成绩 ≤100，z ≤100。

## 题解

### 本题主要算法思想——差分算法

#### 一维差分

-------------------

> **差分概念**
>
> + 对于一个数列*a~i~*，我们需要维护的数据是“相邻两个数之差”。这种策略是，令*p~i~=a~i~-a~i-1~*，即相邻两数之差。我们称数列*p~i~*为数列*a~i~*的差分数列。

>**差分应用**
>
>+ 它可以维护多次对序列的一个区间加上一个数，并在最后询问某一位的数或是多次询问某一位的数。

--------

假设原数组表示为*a[0 ~ n]*，差分数组为*d[0 ~ n+1]*。初始化差分数组：

1. *d[0] = a[0] = 0*
2. *d[i] = a[i] - a[i-1],1 ≤ i ≤ n*
3. *d[n+1] = 0 - a[n]* 

**可见，一维差分数组记录的是两个相邻数之间的差，即d[i] 表示 a[i]与a[i-1]的差。**

**差分数组的大小一般会开为n+2，并令d[0]=0,方便操作。**

--------------------

> **差分数组的性质**
>
> + 将区间修改转为单点修改
>
>   > 对区间a[l~r]加上c，只需对**==d[l] += c,d[r+1] -= c==**即可，这是差分数组最重要的性质之一。
>
> + SUM(d[0]~d[i])=a[1],前缀和性质。

### 本题代码

```c++
#include <stdio.h>
#define N 5000005
int min(int a,int b);
int main()
{
    int a[N]={0},d[N];
    int n,p;
    int ans;
    scanf("%d%d",&n,&p);
    for(int i=1;i<=n;i++)
    {
        scanf("%d",&a[i]);
        d[i]=a[i]-a[i-1];
    }                               //初始化差分数组
    for(int i=1;i<=p;i++)
    {
        int x,y,z;
        scanf("%d%d%d",&x,&y,&z);
        d[x]+=z;
        d[y+1]-=z;
    }                               //将区间操作转为端点
    ans=d[1];
    for(int i=1;i<=n;i++)
    {
        a[i]=a[i-1]+d[i];
        ans=min(a[i],ans);
    }                               //利用差分数组前缀和性质各项分数
    printf("%d",ans);
    return 0;
}
int min(int a,int b){
    if(a>b)return b;
    else return a;
}                                   //求较小值的函数
```





